## 经典网络
经典网络类型的云产品，统一部署在阿里云公共基础设施内，规划和管理由阿里云负责，更适合对网络易用性要求较高的用户，采用三次隔离。

## 专有网络
专有网络VPC是基于阿里云构建的一个隔离网络环境，专有网络之间逻辑上彻底隔离。您可以自定义这个专有网络的拓扑和IP地址，适用于对网络安全性要求较高和有一定网络管理能力的用户，采用二层隔离，相对经典网络而言，专有网络具有较高的安全性和灵活性。

##  SLB(负载均衡服务)
SLB主要用于负载均衡，通过分流网络流量来提高服务器性能。它能够将流量分发到多个服务器，平衡服务器的负载，从而提高整体性能和可靠性。SLB适用于访问量大、需要水平扩展的应用场景。通过使用SLB，可以减少单点故障的风险，并确保服务的可用性和可扩展性。
##  EIP(弹性公网IP)
EIP提供独立的公网IP资源，可以绑定到云上的各种资源上，如ECS（弹性服务器）、NAT网关、私网负载均衡SLB等。EIP可以实现公网IP与资源的解耦，满足灵活管理的需求。其主要目的是为了解决服务器IP与服务器实体之间的强关联问题。在业务发展初期，访问量较小，用户购买一个较小规格的ECS实例即可满足业务需求。但随着用户量和业务量逐渐攀升，可能需要更换更大规格的ECS或使用SLB+ECS便于后续的扩展。如果没有EIP，更换ECS意味着更换实例IP，可能导致业务中断。而EIP的出现则很好地解决了这类问题。
##  NAT网关
NAT网关主要用于网络地址转换和隔离，提高网络的安全性和可靠性。它能够将私有IP地址转换为公网IP地址，实现内网与公网的通信。NAT网关适用于私有网络中需要访问公网的场景，如企业或组织内部的网络。通过使用NAT网关，可以实现公网的访问和安全隔离，保护内部网络不被外部攻击或入侵。

* SNAT(Source Network Address Translation)：源网络地址转换，内部地址要访问公网上的服务时，内部地址会主动发起连接，将内部地址转换为公网IP。有关这个地址转换称为SNAT。
具体示例说明：
公司内部的主机A想访问互联网上的主机C，首先将请求数据包(源：ipA,目标：ipC)发送到防火墙所在的主机B，B收到后将数据包源地址改为本机公网网卡的ip(源：ipA,目标：ipB)，然后经互联网发送给C，C收到后将回应包(源：ipC,目标：ipB)转发给C的路由器，经互联网将回应包转给B，B收到回应包后修改其目的地址，将回应包(源：ipC，目标：ipA)然后将数据包转发给A。

* DNAT(Destination Network Address Translation)：目标地址转换，内部需要对外提供服务时，外部主动发起连接，路由器或者防火墙的网络接收到这个连接，然后将连接转换到内部，此过程是由带公网ip的网关代替内部服务来接收外部的连接，然后在内部做地址转换。此转换成为DNAT，主要用于内部服务对外发布。
互联网主机C想访问企业内部的web服务器A，但A的地址是私有地址，无法直接访问。此时，C可以访问防火墙的公网地址，C的请求数据包（源：ipC，目标：ipB）到达防火墙B后，在B的PREROUTING上将请求数据包的目标地址进行修改，并将数据包（源：ipC，目标：ipA）发送给A。A收到后进行回复发送响应包（源：ipA，目的ipC）到防火墙，防火墙收到后对数据包源地址进行修改，并将响应包（源：ipB，目标：ipC）给C。利用这种机制可以将企业内部的服务发布到互联网。

* 丰富的监控指标

* 同一个VPC内支持创建多个公网NAT网管

### 为已绑定EIP的ECS实力统一公网出口IP

为绑定了EIP的ESC实例单独分配一块弹性网卡，并将EIP绑定到弹性网卡上

### NAT vs EIP

如果应用需要灵活地管理和扩展公网入口，并且需要解耦服务器IP与服务器实体之间的强关联，EIP是更合适的选择。而如果应该要在私有网络中安全地访问公网，并且需要实现地址的转换和隔离，那就更适合NAT网关。

## VPN 网关

VPN网关是一款网络连接服务，通过建立加密隧道的方式实现企业本地数据中心，企业办公网络，互联网客户端与阿里云专有网络VPC之间安全可靠的私网连接。

* 安全： 使用了IKE和IPsec协议对传输数据加密，保证了数据安全
* 稳定： 采用了双击热备架构
* 简单： 开箱即用
* 低成本：相比物理专线成本低

### IPsec-VPN

支持企业本地数据中心，企业办公网络与VPC建立网络连接。

是基于路由的网络连接技术，提供灵活的流量路由方式，方便配置和维护VPN策略

IPsec连接可绑定VPN网关实例，也可以绑定转发路由器实例，通过云企业网实现网络互通

前提条件：
* 已经常见阿里云账号，创建了VPC并部署云服务
* 数据中心网关设备支持IKEv1和IKEv2协议
* 本地数据中心的网关设备已经配置了静态公网IP
* 本地数据中心与VPC互通的网段没有重叠
* 确保安全组规则允许本地数据库中心的网关设备访问云资源

### SSL—VPN
是基于OpenVPN架构的网络连接技术。适用于在互联网客户与VPC之间建立网络连接。

部署后，仅需要再互联网客户端中加载证书并发起连接，互联网客户就可以与VPC互通。

SSL—VPN仅支持绑定国际标准商用密码算法的公用VPN网关实例

## 智能接入网关
是阿里云提供的软件定义广域网SD-WAN解决方案。企业可通过智能接入网关实现一站式接入阿里云，获得更加智能，安全和可靠的上云体验。

三个产品形态：
* 硬件CPE设备形态 
* 镜像vCPE形态
* App形态

## 高速通道
应用场景：同地域/跨地域/跨账号两个VPC互联、VPC与本地IDC互连


### 边界路由器VBR
VBR提供一下功能：

## 云企业网
云企业网CEN是运行在阿里云私有全球网络上的一张高可用网络。云企业网通过转发路由器TR帮助您在跨地域专有网络之间，专有网络和本地数据中心间搭建私网通信通道，为您大招一张灵活、可靠、大规模的企业级云上网络

## 全球加速
## 云连接器
## 私网类型产品
## 公网类型产品 

# ECS
## ECS基本概念
ECS实例等同于一台虚拟服务器，内含CPU、内存、操作系统、网络配置、磁盘等基础组件。

### 云服务ECS使用的限制
* 仅弹性裸金属服务器和超级计算集群支持二次虚拟化，其他规格不支持安装虚拟化软件和二次虚拟。
* 不支持声卡应用。
* 不支持直接加载外接设备，如硬件加密狗、U盘、外接硬件、银行Ukey等。
* 不支持多播协议。如果需要多播，建议改为使用单播点对点。
* 日志服务不支持32位Linux系统云服务器

### 保证ECS正常运行的注意事项
* 创建ECS实力后，您有实例的管理员权限，阿里云没有权限登入你的实力。
* 禁止使用ECS实例做流量穿透服务。
* 不要卸载相关硬件驱动。
* 不要随意修改网卡MAC地址。
* 建议不要开启SELinux。
* 建议将相关软件都设置成开机启动。如果应用服务连接数据库，需要在程序中设置成自动重连机制。
## 产品架构
* 实例：等同于一台虚拟服务器
* 镜像：装机盘
* 存储块：数据存储
* 快照：某一时间点云盘的实时副本
* 网络：专有网络vpc
* 安全组：虚拟防火墙
## 地域
数据中心所在的位置
## 可用区
统一地域内，电力和网络相互独立的物理区域
* 同一可用区内实例的网络延迟更小
* 同一地域内可用区之间使用低时延链路相连，内网互通
## 实例规格
### 入门级实例
一系列面向中小网站或个人的实力规格总称。

非绑定CPU调度模式。

实例规格族： 共享型，突发性能型

适用场景：轻量级Web应用程序，轻负载应用，微服务，开发测试压测服务应用

### 企业级实例
具有独享且稳定的计算，存储，网络资源，适合业务稳定性很高的场景。

固定CPU调度

实例规格族： 通用性，计算型，内存型，大数据型等

适用场景：大型多人游戏前端，数据分析和计算，中大型Web服务，高精度编解码，渲染，大数据处理加工

## 镜像

ECS镜像是创建ECS实例的基础模板，它包含了启动和运行实例所需的操作系统和预配置数据。在创建ECS实例时必须选择一个镜像，该镜像可以是只包含系统盘的单个存储云盘，也可以是包含系统盘和一个或多个数据盘的组合。本文介绍镜像类型、费用以及如何选择镜像等其他信息

镜像就是云服务ECS的装机盘，为云服务ECS实例提供操作系统，初始化应用数据，预装软件。通过镜像可以创建并部署云服务ECS。

### 镜像类型
* 公共镜像
* 自定义镜像: 基于实例创建，基于快照创建，使用SMC自动导入，通过OSS手动导入
* 共享镜像
* 镜像市场镜像
* 社区镜像




## ECS实例在VPC下IP地址分类
### 私有IP地址
根据实例所属的VPC和虚拟交换机网段，**VPC类型实例已经创建即被分配一个私有IP地址**

### 公网IP地址
VPC类型实例支持两种公网IP地址
* ECS系统分配的公网地址（**PublicIP**）。
* 弹性公网IP地址 **EIP**
## ECS实例在经典网络下IP地址分类
### 内网IP地址
每台经典网络ECS的实例一定会被分配一个IP地址用于内网的通信，这个IP地址被称为内网IP地址。

经典网络内IP地址不支持组播和广播。

经典网络内网IP地址不支持修改。

### 公网IP地址
如果您购买了公网带宽，即公网带宽不为0Mbit/s，阿里云会为实例分配一个公网IP。

不支持EIP。

## IPv6
### 使用IPv6步骤
* 搭建IPv6 VPC
* 分配IPv6地址
* 开通IPv6公网带宽
* 配置IPv6地址
* 添加IPv6安全组规则
* 测试网络连通性
* 可选 删除IPv6地址

## IP地址的相关操作
### 修改专有网络私有IP地址
可以通过直接修改专有网络中ECS的私有IP，也可以通过更改实例所属的交换机来更改ECS实例的私有IP

前提条件
* 实例的弹性网卡未设置辅助私网IP地址
* 实例处于已停止状态
* 如果要更换交换机，需确保交换区的可用区与实例的可用区相同

### 更换公网IP

## ECS 安全
### 安全组
安全组是云上的虚拟防火墙，它包含安全组规则和安全组内的云资源（虚拟机、弹性网卡等）。用户可以配置安全组规则来允许或拒绝指定类型的网络流量通行，还可以基于安全组划定安全域，通过授权安全组访问的能力，来实现云资源之间的访问控制。

安全组是一种虚拟防火墙，用于控制安全组内ECS实例的出入流量。安全组分为普通安全组和企业安全组，一台ECS实例最多可以加入**5**个安全组，初次创建ECS实例时会自动创建一个默认安全组，默认安全组是普通安全组。
## 安全组实践基本建议
* 白名单而不是黑名单
* 最小授权原则
* 不用类型应用使用不同的安全组
* 尽可能保持单个安全组的规则简洁
* 不要随便更新安全组的规则
* 不需要公网访问的资源不提供公网IP

## SSH密钥对
阿里云SSH密钥对是一种安全便捷的登录认证方式，用于在SSH协议中进行身份验证和加密通信。由公钥和私钥组成且仅支持Linux实例，满足您对更高安全性、便利性和自动化能力的业务需求。您可以直接在Windows环境和支持SSH命令的环境（例如Linux环境、Windows下的MobaXterm）中使用SSH密钥对连接Linux实例。
## 身份管理
为确保您的阿里云账号及云资源使用安全，如非必要都应避免直接使用阿里云账号（即主账号）来访问云服务器ECS。推荐的做法是使用RAM身份（即RAM用户和RAM角色）来访问云服务器ECS。
### RAM用户
阿里云的访问控制RAM（Resource Access Management）提供了强大的细粒度权限管理功能，适用于企业中多个部门或角色需要访问ECS资源的情况。为了保障敏感信息和关键业务流程的安全，您可以根据各部门或角色的具体职责分配不同的访问权限。通过实施权限分离策略，不仅能显著提升管理效率，还能有效降低信息泄露的风险。本文介绍如何通过控制RAM用户的权限，以实现对云服务器ECS资源的访问控制。

#### 场景介绍
假设您公司是使用ECS来托管应用程序和服务。其中，IT架构规划由管理人员主导，他们对所有ECS资源拥有控制权，包括但不限于创建资源、调整资源分配及安全策略配置等关键职责。开发人员负责项目的持续迭代和功能创新，并承担将项目部署到ECS上的任务。运维人员则承担起保障系统正常运转的责任，通过创建快照、创建镜像、执行相关脚本等方式维护现有服务。

针对这三类人员的需求，我们将设计如下权限方案：

管理人员：可以拥有创建、删除ECS实例及修改安全组规则等所有ECS操作权限。

开发人员：能够查看所有ECS实例的信息，但不能修改任何设置，同时可以登录ECS实例进行操作。

运维人员：具备创建部分资源的权限，但不具备删除资源的权限，如创建快照和镜像、执行脚本等任务。

### RAM用户组
当您的阿里云账号下有多个RAM用户时，可以通过创建用户组对职责相同的RAM用户进行分组管理和批量授权，实现高效地管理RAM用户及其权限。对于RAM用户组的使用，建议您：

在对RAM用户组授权时遵循最小权限策略原则。

在RAM用户职责发生变化时将其从不再归属的用户组中移除，避免权限滥用。

在某个用户组不再需要某些权限时移除用户组对应的权限。
### RAM角色
RAM角色是一种虚拟用户，可以被授予一组权限策略。与RAM用户不同，RAM角色没有永久身份凭证（登录密码或访问密钥），需要被一个可信实体扮演。扮演成功后，可信实体将获得RAM角色的临时身份凭证，即安全令牌（STS Token），使用该安全令牌就能以RAM角色身份访问被授权的资源。

## 基础安全服务
云服务器ECS提供了基础安全服务，包括异常登录检测、漏洞扫描、基线配置核查等。您可以在ECS控制台或者云安全中心看到您的云服务器安全状态。

由**阿里云云安全中心（Security Center**提供云服务器ECS的基础安全服务，帮助您收集并呈现安全日志和云上资产指纹，主要提供免费版的漏洞检测、安全告警和基线检查服务。您可以在ECS管理控制台的概览页面或者云安全中心控制台查看相关安全信息。
### 计费说明
基础安全服务的计费说明如下：

云服务器ECS的基础安全服务为免费服务，不收取服务费用。

如果您需要升级为高级版或者企业版云安全中心，可以在云安全中心控制台免费试用或者购买服务。

## 实例启动模板
实例启动模板是一种用于快速创建实例的工具，其中包含了用于创建ECS实例的任意配置信息（除实例密码），包括**密钥对、RAM角色、实例类型和网络设置**等。每个模板可以有多个版本，每个版本可以配置不同的参数，您可以使用指定的模板的任意一个版本快速创建实例，提升效率及使用体验。实力启动模板不支持修改。

## 部署集
部署集是控制ECS实例分布的策略，使您能在创建ECS实例的时候就设计容灾能力和可用性。

针对追求高可用性的集群业务，可利用高可用或部署集组高可用策略，将ECS实例分散部署在不同的物理服务器上，以避免单点故障，提高业务的可用性；对于网络延迟高度敏感的应用（如高频交易、实时数据分析等），可利用网络低时延策略，将ECS实例集中部署到同一个网络拓扑范围内，缩短ECS实例间的网络通信延时。本文主要介绍部署集的部署策略、使用限制及如何使用部署集。

## 标签
标签可以识别资源和用户组别，允许企业或者个人将相同云服务器ECS资源归类。便于搜索和资源整合。
* 支持标签的服务：ECS实例、存储、快照、镜像、安全组等。
* 每个标签都由一对键值对（Key-Value）组成
* 每个实例最多可以绑定20个标签，每次最多绑定或解绑20个标签。
* 每个资源的任一标签的Key必须唯一，相同的Key会被覆盖。
* 不同地域中的标签信息不互通。
# ACK
## ACK 产品形态
专属创建选专有，弹性灵活Serverless，入门高兴选托管。
* 专有版Kubernetes：用户需要自行创建Master节点及Worker节点。
* 托管版kubernetes：用户只需创建Worker节点，Master节点有ACK创建。 
* Serverless Kubernetes：无需创建Master节点及Worker节点。
## 方案规划
从开发代码到运行容器化应用，大致需要以下四个阶段：
* 编写代码。
* 使用Dockerfile构建镜像：Dokerfile是一个文本文件，包含了将代码打包成镜像所需的指令。
* 上传至镜像镜像仓库。
* 运行容器化应用。
## 创建ACK集群
* 创建K8s托管版集群是，用户只需创建节点，无需维护控制面板。
* K8s专有版集群需创建至少3个Master节点以保证高可用以及若干Worker节点，可对集群基础建设进行更细力度的控制，但需要自行规划、维护、升级集群。
* ACK集群仅支持专有网络VPC。
* ECS实例使用限制：支持创建按量付费和包年包月的ECS实例。不支持抢占式实例。
## 节点与节点池
* 节点：一台服务器（可以是虚拟主机实例或者物理机）已经安装了Docker Engine，可以用户部署和管理容器。
* 管理节点 （Master Node）：k8s集群的管理者。
* 工作节点（Worker Node）：k8s集群中承担工作负载的节点。
* 节点池：集群中具有相同配置的一组节点，节点池可以包含一个或多个节点。
* 托管节点池：ACK全新推出的自动化运维型节点池。

### 节点池的注意事项
* 创建节点池不会影响其他节点池已有节点和业务的运行。
* 集群的节点数最大不能超过100个。
* 在删除节点池前，用户需清空节点池里的所有节点。
* 只能在创建节点池的时候开启自动弹性伸缩功能。
## 容器网络
* 每个Pod都有自己独立的网络空间和IP地址。
* 不同Pod的应用可以监听用样的端口不冲突。
* Pod可以通过各自的IP地址相互访问。
* 同一个VPC下的ECS直接访问Pod。前提需要正确设置安全组规则。
## ACK支持的公网访问方式
* 节点访问
* 负载均衡
* Nginx Ingress
* 域名（External DNS）
* DNAT网关
## 备份中心
* 按时间点的全量极速快照备份
* 定制增量备份能力
* TB级云盘的极速快照
## 弹性伸缩
|组件|介绍|适用场景|使用限制|
|-|-|-|-|
|HPA|K8s内置组件，主要面向在线业务。|在线业务|是适用于Deplyment、StatefulSet等实现scale接口的对象。|
|VPA（alpha）|监控Pod的资源消耗模式，灵活推荐CPU和内存资源分配的配置，并在适当的情况下自动进行调整，而不调整Pod的副本数量。|推荐并自动调整Pod中容器的CPU及内存的Request和Limit|Deployment、DaemonSet、StatefulSet等。需要稳定资源配置的有状态应用的扩容、大型单体应用等场景，通常是在Pod出现异常恢复时生效。|
|CronHPA|类似Crontab的策略定时对Pod进行扩缩容，支持配置时区、执行的日期、跳过执行的日期（例如节假日），支持和HPA协同使用。|定时扩缩容|Deployment、StatefulSet等。业务流量有明显高峰时段、
|Elastic-Workload|根据业务历史指标，自动、主动识别弹性周期并对容量进行预测，提前进行弹性规划，解决弹性滞后的问题。|资源指标（CPU、内存、GPU使用率）、流量指标（QPS、RT）、其他自定义指标|Deployment、Knative Service等。业务流量有明显周期性的场景，例如直播、在线教育、游戏服务等。|

## kubectl
kubectl工具默认会从客户端机器的$HOME/.kube目录下查找名为的文件。该文件用于存储所要管理集群的访问凭证，kubectl会根据该配置文件连接至集群。